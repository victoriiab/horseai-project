{% extends 'frontend/base.html' %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - HorseAI{% endblock %}

{% block extra_css %}
<style>
    .admin-profile-header {
        text-align: center;
        margin-bottom: 40px;
        padding: 40px;
        background: linear-gradient(135deg, var(--bg-card), var(--bg-darker));
        border-radius: var(--radius-lg);
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
    }

    .admin-badge {
        display: inline-block;
        padding: 8px 20px;
        background: linear-gradient(135deg, var(--accent), var(--earth));
        color: white;
        border-radius: 30px;
        font-weight: 600;
        margin-bottom: 20px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .admin-stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
    }

    .admin-stat-card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: 25px;
        border: 1px solid var(--border);
        transition: all 0.3s ease;
    }

    .admin-stat-card:hover {
        border-color: var(--accent);
        transform: translateY(-5px);
        box-shadow: var(--shadow-lg);
    }

    .admin-stat-title {
        color: var(--text-secondary);
        font-size: 0.9em;
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .admin-stat-value {
        font-size: 2.5em;
        font-weight: 700;
        color: var(--accent-light);
        margin-bottom: 5px;
    }

    .admin-stat-detail {
        color: var(--text-tertiary);
        font-size: 0.85em;
    }

    .admin-actions {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: 30px;
        border: 1px solid var(--border);
        margin-bottom: 30px;
    }

    .admin-actions-title {
        font-size: 1.3em;
        color: var(--accent-light);
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border);
    }

    .admin-buttons-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }

    .admin-btn {
        padding: 15px;
        background: var(--bg-darker);
        border: 1px solid var(--border);
        color: var(--text-primary);
        border-radius: var(--radius);
        text-align: center;
        text-decoration: none;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }

    .admin-btn:hover {
        background: var(--bg-hover);
        border-color: var(--accent);
        transform: translateY(-3px);
        text-decoration: none;
    }

    .admin-btn-icon {
        font-size: 1.8em;
    }

    .admin-btn-text {
        font-weight: 600;
    }

    .admin-btn-desc {
        font-size: 0.85em;
        color: var(--text-secondary);
    }

    .user-info-card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: 30px;
        border: 1px solid var(--border);
    }

    .user-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
    }

    .info-item {
        margin-bottom: 15px;
    }

    .info-label {
        color: var(--text-secondary);
        font-size: 0.9em;
        margin-bottom: 5px;
    }

    .info-value {
        color: var(--text-primary);
        font-weight: 500;
        font-size: 1.1em;
    }

    .role-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.85em;
        font-weight: 600;
    }

    .role-superadmin {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        color: white;
    }

    .role-admin {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
    }

    .role-veterinarian {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
    }

    .role-user {
        background: linear-gradient(135deg, #6b7280, #4b5563);
        color: white;
    }

    @media (max-width: 768px) {
        .admin-profile-header {
            padding: 20px;
        }

        .admin-stats-grid {
            grid-template-columns: 1fr;
        }

        .admin-buttons-grid {
            grid-template-columns: 1fr;
        }

        .user-info-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="admin-profile-container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="admin-profile-header">
        <div class="admin-badge">
            {% if user_role == 'superadmin' %}
                ‚ö° SUPER ADMINISTRATOR
            {% elif user_role == 'admin' %}
                üëë ADMINISTRATOR
            {% elif user_role == 'veterinarian' %}
                ü©∫ VETERINARIAN
            {% else %}
                üë§ USER
            {% endif %}
        </div>
        <h1 style="font-size: 2.5em; margin-bottom: 10px;">{{ request.user.username }}</h1>
        <p style="color: var(--text-secondary); font-size: 1.1em;">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π HorseAI</p>
    </div>

    <!-- –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="admin-stats-grid">
        <div class="admin-stat-card">
            <div class="admin-stat-title">–ñ–∏–≤–æ—Ç–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ</div>
            <div class="admin-stat-value">{{ animals_count }}</div>
            <div class="admin-stat-detail">–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</div>
        </div>

        <div class="admin-stat-card">
            <div class="admin-stat-title">–í–∏–¥–µ–æ –∞–Ω–∞–ª–∏–∑–æ–≤</div>
            <div class="admin-stat-value">{{ videos_count }}</div>
            <div class="admin-stat-detail">–í—Å–µ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</div>
        </div>

        <div class="admin-stat-card">
            <div class="admin-stat-title">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã</div>
            <div class="admin-stat-value">{{ analyses_count }}</div>
            <div class="admin-stat-detail">–í—Å–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
        </div>

        <div class="admin-stat-card">
            <div class="admin-stat-title">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div>
            <div class="admin-stat-value">{{ users_count|default:"?" }}</div>
            <div class="admin-stat-detail">–í—Å–µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º–µ</div>
        </div>
    </div>

    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="admin-actions">
        <div class="admin-actions-title">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
        <div class="admin-buttons-grid">
            <a href="/super-admin/" class="admin-btn">
                <div class="admin-btn-icon">üëë</div>
                <div class="admin-btn-text">Super Admin</div>
                <div class="admin-btn-desc">–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–∏—Å—Ç–µ–º—ã</div>
            </a>

            <a href="/analysis/results/" class="admin-btn">
                <div class="admin-btn-icon">üìä</div>
                <div class="admin-btn-text">–í—Å–µ –∞–Ω–∞–ª–∏–∑—ã</div>
                <div class="admin-btn-desc">–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</div>
            </a>

            <a href="/admin/" class="admin-btn">
                <div class="admin-btn-icon">‚öôÔ∏è</div>
                <div class="admin-btn-text">Django Admin</div>
                <div class="admin-btn-desc">–ë–∞–∑–æ–≤–∞—è –∞–¥–º–∏–Ω–∫–∞ Django</div>
            </a>
        </div>
    </div>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <div class="user-info-card">
        <h2 style="margin-top: 0; margin-bottom: 25px; color: var(--accent-light);">üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h2>
        <div class="user-info-grid">
            <div class="info-item">
                <div class="info-label">–†–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ</div>
                <div class="info-value">
                    <span class="role-badge role-{{ user_role }}">
                        {% if user_role == 'superadmin' %}
                            ‚ö° –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                        {% elif user_role == 'admin' %}
                            üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
                        {% elif user_role == 'veterinarian' %}
                            ü©∫ –í–µ—Ç–µ—Ä–∏–Ω–∞—Ä
                        {% else %}
                            üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
                        {% endif %}
                    </span>
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
                <div class="info-value">{{ request.user.username }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">Email</div>
                <div class="info-value">{{ request.user.email|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">–ü–æ–ª–Ω–æ–µ –∏–º—è</div>
                <div class="info-value">{{ custom_user.full_name|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</div>
                <div class="info-value">
                    {% if custom_user.created_at %}
                        {{ custom_user.created_at|date:"d.m.Y H:i" }}
                    {% else %}
                        –ù–µ —É–∫–∞–∑–∞–Ω–∞
                    {% endif %}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</div>
                <div class="info-value">
                    {% if request.user.last_login %}
                        {{ request.user.last_login|date:"d.m.Y H:i" }}
                    {% else %}
                        –ù–∏–∫–æ–≥–¥–∞
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
